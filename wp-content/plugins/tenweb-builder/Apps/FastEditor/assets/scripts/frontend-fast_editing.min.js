class TWBB_SETTING_VALUE{static DEVICE_MODES=["desktop","tablet","mobile"];static WIDGETS_HARDCODED_VALUES={progress:{bar_inline_color:"#FFFFFF"},container:{background_color:"#00000000"},"image-carousel":{slides_to_show:3},"icon-box":{text_align:"center"},"image-box":{text_align:"center"},image:{align:"center"},google_maps:{height:300},"text-path":{align:"left"}};static WIDGETS_VALUES_FROM_STYLE={button:{button_text_color:{selector:".elementor-button-text",style_name:"color"}}};constructor(t,e,o,n){this.setting_name=t,this.model=e,this.container=o,this.view=this.container.view,this.device_mode=n,this.controls=this.model.attributes.settings.controls,this.control_type=this.controls[this.setting_name]?this.controls[this.setting_name].type:null,this.widget_type="container"===this.model.attributes.elType?"container":this.model.attributes.widgetType,this.group_setting_name=null,this.controls[this.setting_name].groupPrefix&&this.controls[this.setting_name].groupType&&(this.group_setting_name=this.controls[this.setting_name].groupPrefix+this.controls[this.setting_name].groupType),this.setting_type=null}get_setting_value(){let t=this.get_applied_setting_value_responsive(),e=t;return this.is_empty_value(t)?(t=this.get_applied_global_value(this.setting_name),this.is_empty_value(t)?(t=this.get_global_default_value(this.setting_name),this.is_empty_value(t)?(t=this.get_global_default_from_elementor_config(),this.is_empty_value(t)?(t=this.get_from_placeholders(),this.is_empty_value(t)?(t=this.get_value_from_style(),null!==t?(this.setting_type="from_style",t):(t=this.get_hardcoded_value(),null!==t?(this.setting_type="from_hardcoded",t):e)):(this.setting_type="from_placeholder",t)):(this.setting_type="from_elementor_config",t)):(this.setting_type="global",t)):(this.setting_type="global",t)):(this.setting_type="custom",t)}get_applied_setting_value_responsive(){let t=TWBB_SETTING_VALUE.DEVICE_MODES.indexOf(this.device_mode);if(0===t||-1===t)return this.get_applied_setting_value(this.setting_name);for(let e=t;e>0;e--){let t=this.setting_name+"_"+TWBB_SETTING_VALUE.DEVICE_MODES[e];if(!this.controls[t])continue;let o=this.get_applied_setting_value(t);if(!this.is_empty_value(o))return o}return this.get_applied_setting_value(this.setting_name)}get_applied_setting_value(t){return this.model.getSetting(t)}get_applied_global_value(t){let e=this.container.getGlobalKey(t),o=window.top.$e.data.commandExtractArgs(e);if(o.command){let t=window.top.$e.data.getCache(window.top.$e.components.get("globals"),o.command,o.args.query);if(t)return t.value}if(this.group_setting_name&&t!==this.group_setting_name){let t=this.get_applied_global_value(this.group_setting_name);if(t&&t[this.setting_name])return t[this.setting_name]}return null}get_global_default_value(t){if(this.container.isGlobalApplied(t))return this.container.getGlobalDefault(t);if(this.group_setting_name&&t!==this.group_setting_name){let t=this.get_global_default_value(this.group_setting_name);if(t&&t[this.setting_name])return t[this.setting_name]}return null}get_global_default_from_elementor_config(){let t=this.model.attributes.widgetType;if(!window.top.ElementorConfig.widgets[t])return null;let e=window.top.ElementorConfig.widgets[t].controls[this.group_setting_name],o=null;if(e&&e.global&&!0===e.global.active&&(o=e.global.default),!o)return null;let n=window.top.$e.data.commandExtractArgs(o);if(n.command){let t=window.top.$e.data.getCache(window.top.$e.components.get("globals"),n.command,n.args.query);if(t)return t.value[this.setting_name]}return null}get_from_placeholders(){return this.controls[this.setting_name].placeholder}get_value_from_style(){if(!TWBB_SETTING_VALUE.WIDGETS_VALUES_FROM_STYLE[this.widget_type])return null;if(!TWBB_SETTING_VALUE.WIDGETS_VALUES_FROM_STYLE[this.widget_type][this.setting_name])return null;let t=TWBB_SETTING_VALUE.WIDGETS_VALUES_FROM_STYLE[this.widget_type][this.setting_name],e=this.view.$el.find(t.selector);return 0===e.length?null:e.css(t.style_name)}get_hardcoded_value(){return TWBB_SETTING_VALUE.WIDGETS_HARDCODED_VALUES[this.widget_type]&&TWBB_SETTING_VALUE.WIDGETS_HARDCODED_VALUES[this.widget_type][this.setting_name]?TWBB_SETTING_VALUE.WIDGETS_HARDCODED_VALUES[this.widget_type][this.setting_name]:null}is_empty_value(t){return null==t||""===t||("slider"===this.control_type?""==t.size:null===t)}}class FE_TOOL_FRONTEND{static INSTANCES=[];static DEVICE_MODE="desktop";static CURRENT_ACTIVE_TOOL_CONTAINER=null;static PREVIOUS_ACTIVE_TOOL_CONTAINER=null;constructor(){this.model="",this.view="",this.panel="",this.container="",this.widgetID="",this.isGlobalActive=!1,this.settings_to_disable_global=null,this.hasVisibleValue=!1,this.toolSelector="",this.activeToolData=null,FE_TOOL_FRONTEND.INSTANCES.push(this)}init(){this.registerEvents()}reInit(t,e,o){let n=this;n.model=e,n.panel=t,n.view=o,n.container=n.view.container,n.widgetID=n.model.attributes.id,n.view.$el.hasClass("twbb-active-fast-editor-tools")||FE_TOOL_FRONTEND.activateTool(n.view.$el),n.addRenderEventListener(),n.hasVisibleValue||!1===n.toolsAreRendered()?n.open_editor_command_when_ready():(n.open_editor_command(),n.renderRightTools())}renderRightTools(){}open_editor_command(){}renderTool(t=!1,e=!0,o=null){}registerEvents(){jQuery(document).on("keyup",".twbb-video-tool-url",(function(){""!==jQuery(this).val().trim()?(jQuery(this).closest(".twbb-video-tool-url-container").removeClass("twbb-video-tool-url_inactive"),jQuery(this).closest(".twbb-video-tool-url-container").find(".twbb-video-tool-open-url").attr("href",jQuery(this).val())):jQuery(this).closest(".twbb-video-tool-url-container").addClass("twbb-video-tool-url_inactive")})),jQuery(document).on("click",".twbb-video-tool-open-url",(function(){window.open(jQuery(this).attr("href"),"_blank")}))}onToolClick(t,e=""){}dataPush(t){this.callDataAnalytics(jQuery(t).attr("data-analytics"))}callDataAnalytics(t,e="",o=""){""===e&&(e="Fast editing tool"),""===o&&this.model&&(o=this.model.attributes.elType,void 0!==this.model.attributes.widgetType&&(o+=": "+this.model.attributes.widgetType)),window.parent.analyticsDataPush(t,e,o)}setSetting(t,e,o=""){""===o&&(o={external:!0,render:!0}),window.parent.$e.commands.run("document/elements/settings",{container:t,options:o,settings:e})}getResponsiveControl(t){if("desktop"===FE_TOOL_FRONTEND.DEVICE_MODE)return t;let e=this.getWidgetType(),o=window.top.ElementorConfig.widgets[e].controls,n=t+"_"+FE_TOOL_FRONTEND.DEVICE_MODE;return o[n]?n:t}disableGlobals(t,e){return parent.window.$e.commands.run("document/globals/disable",{container:t,settings:e,options:{restore:!0}})}changeWidgetSetting(t,e,o="",n=null,i=null){null===n&&(n=this.container),null===i&&(i=this.settings_to_disable_global);let l=!1;if(null!==i){l="global"===this.getAppliedSettingValueWithType(t).type}let s=this;l?this.disableGlobals(n,i).then((function(){s.setSetting(n,e,o),o&&!1===o.render&&s.view.renderUI(),s.afterChangeWidgetSetting(),FE_TOOL_FRONTEND.reRenderToolsWithVisibleValues()})):(s.setSetting(n,e,o),o&&!1===o.render&&s.view.renderUI(),s.afterChangeWidgetSetting(),FE_TOOL_FRONTEND.reRenderToolsWithVisibleValues())}getAppliedSettingValue(t){return new TWBB_SETTING_VALUE(t,this.model,this.container,FE_TOOL_FRONTEND.DEVICE_MODE).get_setting_value()}getAppliedSettingValueWithType(t){let e=new TWBB_SETTING_VALUE(t,this.model,this.container,FE_TOOL_FRONTEND.DEVICE_MODE);return{value:e.get_setting_value(),type:e.setting_type}}setSelectActiveElement(t,e){("string"==typeof e||e instanceof String)&&(e=e.toLowerCase()),jQuery(t.find("ul.twbb-fe-dropdown li span")).each((function(){let t=jQuery(this);jQuery(this).text().toLowerCase()==e?t.addClass("twbb-fe-select-tool-active"):t.removeClass("twbb-fe-select-tool-active")}))}addRenderEventListener(){this.view.off("render",this.renderEventListenerCallbackForTool,this),this.view.on("render",this.renderEventListenerCallbackForTool,this),this.view.off("render",FE_TOOL_FRONTEND.renderEventListenerCallback,FE_TOOL_FRONTEND),this.view.on("render",FE_TOOL_FRONTEND.renderEventListenerCallback,FE_TOOL_FRONTEND),this.model.off("request:edit",FE_TOOL_FRONTEND.renderEventListenerCallback,FE_TOOL_FRONTEND),this.model.on("request:edit",FE_TOOL_FRONTEND.renderEventListenerCallback,FE_TOOL_FRONTEND)}renderEventListenerCallbackForTool(){let t=this;setTimeout((function(){t.onWidgetRender()}),50)}onWidgetRender(){let t=this;if(null===t.activeToolData)return;if(t.widgetID!==t.activeToolData.widget_id)return;let e=t.activeToolData.widget_el.find('.twbb-fe-tools [data-control="'+t.activeToolData.control+'"]');e&&(t.activeToolData.render_tool?t.renderTool():t.onToolClick(e))}setActiveToolData(t,e=!1){FE_TOOL_FRONTEND.deleteAllActiveToolData(),this.activeToolData={widget_id:this.widgetID,widget_el:this.view.$el,control:t.attr("data-control"),render_tool:e}}open_editor_command_when_ready(){let t=this,e=5,o=setInterval((function(){e--,(t.toolsAreRendered()||0===e)&&(t.open_editor_command(),t.renderRightTools(),clearInterval(o))}),50)}toolsAreRendered(){return null!==this.getToolsContainer()}renderIfEmpty(){}afterChangeWidgetSetting(){}closeTool(t=null){}widgetHasTool(){return!(!this.toolSelector||!this.view.$el)&&this.getToolsContainer().find(this.toolSelector).length>0}getToolsContainer(t=null){let e=FE_TOOL_FRONTEND.getChildWithClass(this.view.$el,"twbb-fast-editor-tools-container");if("container"===this.model.attributes.elType)return e;if(null!==e)return FE_TOOL_FRONTEND.getChildWithClass(this.view.$el,"twbb-fast-editor-tools-container");let o=this.view.$el.find(".elementor-widget-container:first");return o.length>0?"editor"===t?o:FE_TOOL_FRONTEND.getChildWithClass(o,"twbb-fast-editor-tools-container"):null}getWidgetType(){return this.model?"container"===this.model.attributes.elType?"container":this.model.attributes.widgetType:null}static renderEventListenerCallback(){setTimeout((function(){let t=FE_TOOL_FRONTEND.getToolsContainer();t?"1"!==t.data("rendered")&&(FE_TOOL_FRONTEND.reRenderToolsWithVisibleValues(),t.data("rendered","1")):FE_TOOL_FRONTEND.reRenderToolsWithVisibleValues()}),51)}static deleteAllActiveToolData(){for(let t of FE_TOOL_FRONTEND.INSTANCES)t.activeToolData=null}static deleteActiveToolDataIfWidgetHasChanged(t){for(let e of FE_TOOL_FRONTEND.INSTANCES)null!==e.activeToolData&&e.activeToolData.widget_id!==t&&(e.activeToolData=null)}static reInitTools(t,e,o){for(let n of FE_TOOL_FRONTEND.INSTANCES)n.reInit(t,e,o)}static reRenderToolsWithVisibleValues(){for(let t of FE_TOOL_FRONTEND.INSTANCES)t.hasVisibleValue&&t.widgetHasTool()&&t.renderTool(!0,!1);if("object"==typeof window.twbb_fast_editor_tools_state){let t=window.parent.$e.components.get("panel/editor").activeModelId;if(void 0!==window.twbb_fast_editor_tools_state[t]){"tools"===window.twbb_fast_editor_tools_state[t]&&FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER.find(".twbb_ask_to_ai_opened").removeClass("twbb_ask_to_ai_opened")}window.parent.jQuery("body").hasClass("twbb-sg-sidebar-opened")?jQuery(".twbb-fast-editor-tools-container").addClass("twbb_zoom"):jQuery(".twbb-fast-editor-tools-container").removeClass("twbb_zoom")}}static changeDeviceMode(t=!0){let e=elementor.channels.deviceMode.request("currentMode");if(e===FE_TOOL_FRONTEND.DEVICE_MODE)return!1;FE_TOOL_FRONTEND.DEVICE_MODE=e,t&&FE_TOOL_FRONTEND.reRenderToolsWithVisibleValues()}static closeAllTools(t=null){let e=[];if(FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER&&e.push(FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER),FE_TOOL_FRONTEND.PREVIOUS_ACTIVE_TOOL_CONTAINER&&!FE_TOOL_FRONTEND.PREVIOUS_ACTIVE_TOOL_CONTAINER.is(FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER)&&e.push(FE_TOOL_FRONTEND.PREVIOUS_ACTIVE_TOOL_CONTAINER),0!==e.length)for(let o of FE_TOOL_FRONTEND.INSTANCES)for(let n of e)(null===t||o instanceof t)&&o.closeTool(n)}static closeOtherTools(t){if(FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER)for(let e of FE_TOOL_FRONTEND.INSTANCES)e instanceof t||e.closeTool(FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER)}static activateTool(t){if(t=jQuery(t),!(FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER&&FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER.is(t)||(FE_TOOL_FRONTEND.PREVIOUS_ACTIVE_TOOL_CONTAINER=FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER,FE_TOOL_FRONTEND.deactivateTool(),FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER=t,FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER.addClass("twbb-active-fast-editor-tools"),"object"!=typeof window.twbb_fast_editor_tools_state))){let t=window.parent.$e.components.get("panel/editor").activeModelId;if(void 0!==window.twbb_fast_editor_tools_state[t]){"tools"===window.twbb_fast_editor_tools_state[t]&&FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER.find(".twbb_ask_to_ai_opened").removeClass("twbb_ask_to_ai_opened")}}}static deactivateTool(){null!==FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER&&(FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER.removeClass("twbb-active-fast-editor-tools"),FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER=null)}static getActiveToolContainer(){return FE_TOOL_FRONTEND.CURRENT_ACTIVE_TOOL_CONTAINER}static closestWithLimit(t,e,o){for(t instanceof jQuery&&(t=t[0]);o>0;){if(t.classList.contains(e))return!0;t=t.parentElement,o--}return!1}static getChildWithClass(t,e){for(let o of t.children())if(o=jQuery(o),o.hasClass(e))return o;return null}static getToolsContainer(){return FE_TOOL_FRONTEND.INSTANCES[0].getToolsContainer()}}window.FE_TOOL_FRONTEND=FE_TOOL_FRONTEND;class TWBB_DROPDOWN_SELECT_TOOL extends FE_TOOL_FRONTEND{constructor(){super(),this.tool_control="",this.tool_value="",this.dropdown_type="default"}onToolClick(t){FE_TOOL_FRONTEND.closeOtherTools(TWBB_DROPDOWN_SELECT_TOOL),t=jQuery(t);let e=this;if(t.find("ul.twbb-fe-dropdown li").length>0)return;let o=[];o="object"==typeof e.tool_control?e.tool_control:[e.tool_control],o.forEach((function(o){let n="",i=e.getDropdownOptions(o);if(!i)return;let l=i.id+"_dropdown_options";!jQuery("#"+l).length>0&&(n='<script type="text/html" id="'+l+'">',n+=e.collectLi(i),n+="<\/script>",jQuery("body").append(n)),jQuery(t).find("ul.twbb-fe-dropdown").html(jQuery("#"+l).html())}))}collectLi(t){return"number"===this.dropdown_type?this.collectLiNumber(t):this.collectLiDefault(t)}collectLiNumber(t){let e="";for(let o=t.value.min;o<=t.value.max;o++)e+="<li><span>"+o+"</span></li>";return e}collectLiDefault(t){let e="";return jQuery.each(t.value,(function(t,o){e+='<li data-action="'+t+'"><span data-key="'+t+'">'+o+"</span></li>"})),e}getDropdownOptions(t){let e=this.getWidgetType()+"_"+t+"_dropdown_options";return window.twbb_fe_localized_data[e]}closeTool(t=null){null===t&&(t=this.getToolsContainer()),t.find(".twbb-fe-select-tool.active").each((function(){handleDropdown(jQuery(this),!1)}))}}class FastEditorHelper{static setSetting(t,e,o=""){""==o&&(o={render:!0}),window.parent.$e.commands.run("document/elements/settings",{container:t,options:o,settings:e})}static disableGlobals(t,e,o){window.parent.$e.commands.run("document/globals/unlink",{container:t,globalValue:e,options:{external:!0},setting:o})}}class TWBB_CHOICE_TOOL extends FE_TOOL_FRONTEND{constructor(){super(),this.tool_control=[],this.tool_values={},this.hasVisibleValue=!0,this.toolSelector=".twbb-choice-tool-container",this.active_class="twbb-choice-active"}open_editor_command(){this.setToolControls(),this.tool_control.length>0&&this.renderTool()}onToolClick(t,e=""){FE_TOOL_FRONTEND.closeAllTools(),this.tool_control||this.setToolControls();let o=jQuery(t).closest(".twbb-choice-tool-container"),n=o.attr("data-control");this.tool_values[n]=jQuery(t).attr("data-tool-value"),this.renderTool(),this.setActiveToolData(o,!0);let i=this.getResponsiveControl(n),l={[i]:this.tool_values[n]};this.changeWidgetSetting(null,l),this.dataPush(o)}renderTool(t=!1,e=!0,o){t&&this.setToolControls();let n=this;this.getToolsContainer().find(".twbb-choice-tool-container").each((function(){let t=jQuery(this),e=t.attr("data-control");t.find(".twbb-choice-tool").each((function(){let t=jQuery(this);t.attr("data-tool-value")===n.tool_values[e]?t.addClass(n.active_class):t.removeClass(n.active_class)}))}))}setToolControls(){let t=this;this.getToolsContainer().find(".twbb-choice-tool-container").each((function(){let e=jQuery(this).attr("data-control");t.tool_control.push(e),t.tool_values[e]=t.getAppliedSettingValue(e)}))}}let choice_tool,click_tool,color_picker_tool,count_control_tool,delete_tool,duplicate_tool,font_family_tool,font_size_tool,fontStyle_tool,htmlTag_tool,more_tool,shape_tool,url_tool,video_tool,write_with_ai_tool;jQuery(document).on("ready",(function(){choice_tool=new TWBB_CHOICE_TOOL,window.choice_tool=choice_tool,choice_tool.init()}));class TWBB_CLICK_TOOL extends FE_TOOL_FRONTEND{constructor(){super(),this.tool_control="",this.toolSelector=".twbb-click-tool-container"}open_editor_command(){this.setToolControl()}onToolClick(t="",e=""){let o=this;void 0===o.tool_control&&o.setToolControl(),FE_TOOL_FRONTEND.deleteAllActiveToolData(),"container"==jQuery(t).closest(".twbb-fast-editor-tools-container").parent().attr("data-element_type")&&(window.parent.jQuery(".elementor-component-tab.elementor-panel-navigation-tab.elementor-tab-control-style").trigger("click"),window.parent.jQuery('.elementor-control-background_background .tooltip-target[data-tooltip="Classic"]').trigger("click")),"widget"!=jQuery(t).closest(".twbb-fast-editor-tools-container").parent().parent().attr("data-element_type")||0!=jQuery(o.panel.el).find("."+o.tool_control).length||jQuery(o.panel.el).find(".elementor-panel-navigation-tab.elementor-tab-control-content").hasClass("elementor-active")||(jQuery(o.panel.el).find(".elementor-panel-navigation-tab").removeClass("elementor-active"),jQuery(o.panel.el).find(".elementor-panel-navigation-tab.elementor-tab-control-content").addClass("elementor-active"),o.panel.currentPageView.activateTab("content"));let n=jQuery(o.panel.el).find("."+o.tool_control+":visible");0===n.length&&"elementor-control-gallery-add"==o.tool_control&&(n=jQuery(o.panel.el).find(".elementor-control-gallery-thumbnails:visible")),n.trigger("click"),o.dataPush(jQuery(this).closest(".twbb-click-tool-container"))}setToolControl(){this.tool_control=this.getToolsContainer().find(".twbb-click-tool-container").attr("data-control")}}jQuery(document).on("ready",(function(){click_tool=new TWBB_CLICK_TOOL,window.click_tool=click_tool,click_tool.init()}));class TWBB_COLORPICKER_TOOL extends FE_TOOL_FRONTEND{constructor(){super(),this.tool_control=[],this.tool_values={},this.pickr="",this.active_control="",this.active_control_color="#000000",this.multi_controls=!1}open_editor_command(){this.setControls()}registerEvents(){let t=this;jQuery(document).on("click",".twbb-color_picker-tool",(function(e){FE_TOOL_FRONTEND.closeOtherTools(TWBB_COLORPICKER_TOOL),t.tool_control.length||t.setControls();let o=t.getToolsContainer();if(jQuery(this).hasClass("twbb-color_picker-open-menu")){if(o.find(".twbb-color_picker-tool-content").is(":visible"))return o.find(".twbb-color_picker-tool-content").hide(),void jQuery(this).closest(".twbb-color_picker-tool-container").removeClass("twbb_color_popup_active");t.positionElement(o.find(".twbb-color_picker-tool"),o.find(".twbb-color_picker-tool-content"),212,135,-10,0,28),o.find(".twbb-color_picker-tool-content").show(),jQuery(this).closest(".twbb-color_picker-tool-container").addClass("twbb_color_popup_active"),o.find(".twbb-color_picker-open").each((function(e){jQuery(this).find(".wbls-pickr-run").length&&(jQuery(this).find(".wbls-pickr-run").addClass("twbb-color_picker-tool_"+t.tool_control[e]+"_"+t.widgetID),t.initPickr(t.tool_control[e],0))}))}else t.onToolClick(jQuery(this))})),jQuery(document).on("click","body",(function(e){null===e.target.closest(".twbb-color_picker-tool-container")&&t.closeTool()})),jQuery(window).scroll((function(){t.pickr&&t.pickr.hide()}))}onToolClick(t){this.setActiveToolData(t.closest(".twbb-color_picker-open")),"container"===jQuery(t).closest(".twbb-fast-editor-tools-container").parent().attr("data-element_type")&&(window.parent.jQuery(".elementor-component-tab.elementor-panel-navigation-tab.elementor-tab-control-style").trigger("click"),window.parent.jQuery('.elementor-control-background_background .tooltip-target[data-tooltip="Classic"]').trigger("click")),t.hasClass("twbb-color_picker-tool")||(t=t.find(".twbb-color_picker-tool")),jQuery(t).addClass("twbb-color_picker-tool_"+this.tool_control[0]+"_"+this.widgetID),this.initPickr(this.tool_control[0],1)}initPickr(t,e){let o=this,n=o.tool_values[t];n||(n="#000000");let i=".twbb-color_picker-tool_"+t+"_"+this.widgetID;this.pickr=new Pickr({el:i,theme:"monolith",useAsButton:!1,default:n,defaultRepresentation:"HEX",closeWithKey:"Escape",position:"bottom-middle",autoReposition:0,inline:!0,adjustableNumbers:!0,components:{palette:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,hsla:!0,input:!0}}}),this.pickr.on("init",(t=>{e&&t.show()})).on("show",((t,e)=>{o.active_control=jQuery(document).find(e._root.button).closest(".twbb-color_picker-open").attr("data-control");let n=-10,i=0,l=28,s=o.getToolsContainer();if(s.find(".twbb-color_picker-tool-content").length){jQuery(window).width()<500?(n=45,i=-50,l=40):(n=45,i=35)}else i=0;o.positionElement(s.find(".twbb-color_picker-open"),jQuery(".pcr-app.visible"),270,171,n,i,l),o.active_control?o.active_control_color=o.tool_values[o.active_control]:(o.active_control=jQuery(document).find(e._root.button).closest(".twbb-color_picker-open").attr("data-control"),o.active_control&&(o.active_control_color=o.getAppliedSettingValue(o.active_control))),e.setColor(o.active_control_color,!1),o.dataPush(jQuery(document).find(e._root.button).closest(".twbb-color_picker-open"))})).on("change",((t,e,n)=>{o.tool_values[o.active_control]!=t.toHEXA().toString()&&(o.tool_values[o.active_control]=t.toHEXA().toString(),o.changeColorSetting(o.container,{[o.active_control]:o.tool_values[o.active_control]})),this.multi_controls&&n.setColor(o.tool_values[o.active_control],!1)}))}changeColorSetting(t,e){this.changeWidgetSetting(this.active_control,e,{external:!0,render:!1},t,{[this.active_control]:""})}setControls(){let t=this,e=this.getToolsContainer();t.tool_control=[];let o=e.find(".twbb-color_picker-open");"container"===jQuery(t.view.$el).attr("data-element_type")&&(o=e.find(".twbb-color_picker-open")),jQuery(o).each((function(){let e=jQuery(this).attr("data-control");t.tool_control.push(e),e&&(t.tool_values[e]=t.getAppliedSettingValue(e))})),t.tool_control.length>1&&(this.multi_controls=!0)}positionElement(t,e,o,n,i,l,s=void 0){let r=jQuery(window).width();if(void 0!==typeof t[0]){let n=t[0].getBoundingClientRect().left;if(r-n<o){if(void 0!==s&&(e.css({right:l,left:"unset",top:s}),r<500)){let t=o-n;e.css({right:-t,left:"unset",top:s})}}else e.css({left:i,right:"unset"})}}closeTool(t=null){return null===t&&(t=this.getToolsContainer()),0!==t.length&&(t.find(".twbb-color_picker-tool-content").hide(),t.find(".twbb-color_picker-tool-container").removeClass("twbb_color_popup_active"),!0)}}jQuery(document).on("ready",(function(){color_picker_tool=new TWBB_COLORPICKER_TOOL,window.color_picker_tool=color_picker_tool,color_picker_tool.init()}));class TWBB_COUNT_CONTROL_TOOL extends TWBB_DROPDOWN_SELECT_TOOL{constructor(){super(),this.tool_control=[],this.tool_values={},this.hasVisibleValue=!0,this.toolSelector=".twbb-fe-counter-select-tool",this.dropdown_type="number"}open_editor_command(){this.setControls(),this.renderTool(),"container"===this.model.attributes.elType&&(this.view.off("render",this.renderRightTools,this),this.view.on("render",this.renderRightTools,this))}registerEvents(){let t=this;jQuery(document).on("click",".twbb-fe-counter-select-tool",(function(){t.tool_control.length||t.setControls(),t.onToolClick(jQuery(this))})),jQuery(document).on("click",".twbb-fe-counter-select-tool .twbb-fe-dropdown li",(function(e){13!==e.keyCode&&t.renderNewValue(jQuery(this).text(),jQuery(this).closest(".twbb-fe-counter-select-tool"))})),jQuery(document).on("change",".twbb-count_control",(function(){t.renderNewValue(jQuery(this).val(),jQuery(this).closest(".twbb-fe-counter-select-tool"))}))}onToolClick(t){super.onToolClick(t),this.renderTool(),this.setSelectActiveElement(t,this.getNumberValue(t)),selectToolClick(t),this.setActiveToolData(t,!0)}renderNewValue(t,e){if(!t||parseInt(t)<=0)return;let o=e.data("control");if(void 0===this.tool_values[o])return;"object"==typeof this.tool_values[o]?this.tool_values[o].size=t:this.tool_values[o]=t;let n=this.getResponsiveControl(o),i={[n]:this.tool_values[o]};this.changeWidgetSetting(null,i),"container"===this.model.attributes.elType&&this.renderRightTools(),this.dataPush(e)}renderRightTools(){let t=this.getToolsContainer();t.find(".twbb-fe-counter-select-tool").removeAttr("style"),this.view.$el.attr("right-tool","1");let e=this.model.getSetting("content_width");"boxed"===e?t.find('.twbb-fe-counter-select-tool[data-tool_type="boxed_width"]').css("display","flex"):"full"===e&&t.find('.twbb-fe-counter-select-tool[data-tool_type="width"]').css("display","flex"),this.renderTool()}setControls(){let t=this;t.tool_control=[],this.getToolsContainer().find(".twbb-fe-counter-select-tool").each((function(){let e=jQuery(this).attr("data-control");t.tool_control.push(e),t.tool_values[e]=t.getAppliedSettingValue(e)}))}renderTool(t=!1,e=!0,o){t&&this.setControls();let n=this;this.getToolsContainer().find(".twbb-fe-counter-select-tool").each((function(){let t=jQuery(this);t.find("input[type='number']").val(n.getNumberValue(t))}))}getNumberValue(t){"string"==typeof t||t instanceof String||(t=jQuery(t).data("control"));let e=this.tool_values[t];return"object"==typeof e&&(e=e.size),e}}jQuery(document).on("ready",(function(){count_control_tool=new TWBB_COUNT_CONTROL_TOOL,window.count_control_tool=count_control_tool,count_control_tool.init()}));class TWBB_DELETE_TOOL extends FE_TOOL_FRONTEND{constructor(){super()}init(){super.init()}registerEvents(){let t=this;jQuery(document).on("click",".twbb-delete-tool",(function(){t.onToolClick(jQuery(this)),t.dataPush(jQuery(this))}))}onToolClick(t){let e=this.container;window.parent.$e.run("document/elements/delete",{container:e})}}jQuery(document).on("ready",(function(){delete_tool=new TWBB_DELETE_TOOL,window.delete_tool=delete_tool,delete_tool.init()}));class TWBB_DUPLICATE_TOOL extends FE_TOOL_FRONTEND{constructor(){super()}init(){super.init()}registerEvents(){let t=this;jQuery(document).on("click",".twbb-duplicate-tool",(function(e){t.onToolClick(jQuery(this),e),t.dataPush(jQuery(this))}))}onToolClick(t){let e=this.container;window.parent.$e.run("document/elements/duplicate",{container:e})}}jQuery(document).on("ready",(function(){duplicate_tool=new TWBB_DUPLICATE_TOOL,window.duplicate_tool=duplicate_tool,duplicate_tool.init()}));class TWBB_FONT_FAMILY_TOOL extends TWBB_DROPDOWN_SELECT_TOOL{constructor(){super(),self.tool_control="",this.settings_to_disable_global={typography_typography:""}}open_editor_command(){this.setToolControl()}setRenderValue(){let t=this;if(t.tool_control){let e=t.getAppliedSettingValue(t.tool_control);this.setSelectActiveElement(this.getToolsContainer(),e)}setFontFamilyOnScroll(t)}registerEvents(){let t=this;jQuery(document).on("click",".twbb-font-family-tool-container.twbb-fe-select-tool",(function(e){t.tool_control||t.setToolControl(),e.target.classList.contains(".twbb-select-tool-search-input")||"twbb-select-input"===e.target.getAttribute("id")||(t.setActiveToolData(jQuery(this)),t.onToolClickDelay(jQuery(this)),t.dataPush(jQuery(this)))})),jQuery(document).on("click",".twbb-font-family-tool-container.twbb-fe-select-tool .twbb-fe-dropdown li",(function(e){let o={[t.tool_control]:jQuery(this).text(),typography_typography:"custom"};t.changeWidgetSetting(t.tool_control,o)}))}onToolClickDelay(t){let e=this,o=!0;e.view.on("before:render",(function(){o=!1})),setTimeout((function(){o&&e.onToolClick(t)}),50)}onToolClick(t){super.onToolClick(t),this.setRenderValue(),this.setActiveToolData(t),selectToolClick(t)}scrollStopDetection(){let t=this;setTimeout((function(){t.enqueueFontsInView()}),100)}enqueueFontsInView(){let t=jQuery(".twbb-font-family-tool-container .twbb-fe-dropdown:not(.twbb-select-tool-search-input):visible");if(t){const e=t.offset().top,o=e+t.innerHeight(),n=[];t.find("li:visible").each((function(t,i){const l=jQuery(i),s=l.offset();s&&s.top>e&&s.top<o&&n.push(l)})),n.forEach((function(t){const e=jQuery(t).find("span").html();elementor.helpers.enqueueFont(e)}))}}setToolControl(){this.tool_control=this.getToolsContainer().find(".twbb-font-family-tool-container").attr("data-control")}collectLi(t){let e="";return jQuery.each(t.value,(function(t,o){e+="no-result"===t?'<li class="twbb-select-no-results">'+o+"</li>":'<li><span style="font-family: '+o+'">'+o+"</span></li>"})),e}}function setFontFamilyOnScroll(t){let e=null;e=setInterval((function(){let o=t.getToolsContainer();o.find(".twbb-font-family-tool-container .twbb-fe-dropdown").length>0&&(o.find(".twbb-font-family-tool-container .twbb-fe-dropdown").on("scroll",(function(){t.scrollStopDetection()})),clearInterval(e))}),500)}jQuery(document).on("ready",(function(){font_family_tool=new TWBB_FONT_FAMILY_TOOL,window.font_family_tool=font_family_tool,font_family_tool.init()}));class TWBB_FONTSIZE_TOOL extends TWBB_DROPDOWN_SELECT_TOOL{constructor(){super(),this.tool_control="",this.typography_font_size="",this.font_size="",this.settings_to_disable_global={typography_typography:""},this.hasVisibleValue=!0,this.toolSelector=".twbb-font_size-tool-container",this.dropdown_type="number"}open_editor_command(){this.setToolControl(),this.tool_control&&(this.setFontSize(),this.renderTool())}registerEvents(){let t=this;jQuery(document).on("click",".twbb-font_size-tool-container",(function(e){jQuery(document).find(t.view.el).hasClass("elementor-loading")||t.onToolClick(jQuery(this))})),jQuery(document).on("click",".twbb-font_size-tool-container.twbb-fe-select-tool .twbb-fe-dropdown li",(function(e){13!==e.keyCode&&t.renderNewValue(jQuery(this).text())})),jQuery(document).on("change",".twbb-font_size",(function(){t.renderNewValue(jQuery(this).val())}))}onToolClick(t){this.tool_control||this.setToolControl(),this.setActiveToolData(t),this.setFontSize(),this.renderTool(),super.onToolClick(t),this.setSelectActiveElement(t,this.font_size),selectToolClick(t)}renderNewValue(t){if(!t||parseInt(t)<=0||!this.typography_font_size)return;this.typography_font_size.size=parseInt(t);let e=this.getResponsiveControl(this.tool_control),o={[e]:this.typography_font_size,typography_typography:"custom"};this.changeWidgetSetting(this.tool_control,o,{render:!1,external:!0}),this.dataPush(this.getToolsContainer().find(".twbb-font_size-tool-container"))}setToolControl(){this.tool_control=this.getToolsContainer().find(".twbb-font_size-tool-container").attr("data-control")}renderTool(t=!1,e=!0){e&&this.setActiveToolData(this.getToolsContainer().find(".twbb-font_size-tool-container"),!0),t&&(this.setToolControl(),this.setFontSize()),this.getToolsContainer().find("input[type='number'].twbb-font_size").val(this.font_size)}setFontSize(){this.typography_font_size=this.getAppliedSettingValue(this.tool_control),this.font_size=this.typography_font_size.size}}jQuery(document).on("ready",(function(){font_size_tool=new TWBB_FONTSIZE_TOOL,window.font_size_tool=font_size_tool,font_size_tool.init()}));class TWBB_FONTSTYLE_TOOL extends TWBB_DROPDOWN_SELECT_TOOL{constructor(){super(),self.tool_control="",self.fontStyle="",this.settings_to_disable_global={typography_typography:""}}open_editor_command(){this.setToolControl(),this.tool_control&&this.setFontStyle()}registerEvents(){let t=this;jQuery(document).on("click",".twbb-font_style-tool-container.twbb-fe-select-tool",(function(){t.tool_control||t.setToolControl(),t.setFontStyle(),t.onToolClick(jQuery(this)),t.dataPush(jQuery(this))})),jQuery(document).on("click",".twbb-font_style-tool-container.twbb-fe-select-tool .twbb-fe-dropdown li",(function(){let e=jQuery(this).find("span").data("key"),o={[t.tool_control]:e,typography_typography:"custom"};t.changeWidgetSetting(t.tool_control,o)}))}onToolClick(t){super.onToolClick(t),this.setActiveToolData(t),this.setSelectActiveElement(t,this.fontStyle),selectToolClick(t)}setToolControl(){this.tool_control=this.getToolsContainer().find(".twbb-font_style-tool-container").attr("data-control")}setFontStyle(){this.fontStyle=this.getAppliedSettingValue(this.tool_control)}}jQuery(document).on("ready",(function(){fontStyle_tool=new TWBB_FONTSTYLE_TOOL,window.font_style_tool=fontStyle_tool,fontStyle_tool.init()}));class TWBB_HTMLTAG_TOOL extends TWBB_DROPDOWN_SELECT_TOOL{constructor(){super(),self.tool_control="",self.tool_value=""}open_editor_command(){this.setToolControl()}registerEvents(){let t=this;jQuery(document).on("click",".twbb-dropdown-select-tool-container.twbb-fe-select-tool",(function(){t.tool_control||t.setToolControl(),t.onToolClick(jQuery(this)),t.dataPush(jQuery(this))})),jQuery(document).on("click",".twbb-dropdown-select-tool-container.twbb-fe-select-tool .twbb-fe-dropdown li",(function(){t.tool_control||t.setToolControl(),t.render_new_value(jQuery(this).find("span").data("key"))}))}onToolClick(t){super.onToolClick(t),"editor"==this.tool_control?this.tool_value=this.getContentCurrentTag(this.tool_control):this.tool_value=this.getAppliedSettingValue(this.tool_control),jQuery(t).find('span[data-key="'+this.tool_value+'"').addClass("twbb-fe-select-tool-active"),selectToolClick(t)}render_new_value(t){let e,o,n=this;n.tool_value=t;let i="";e=window.parent.$e.components.get("panel/editor").activeModelId,o=window.parent.$e.components.get("document").utils.findContainerById(e);let l={};if("editor"==n.tool_control){if(i=this.getToolsContainer().closest(".elementor-widget-container").find(".elementor-text-editor").html(),i=i.trim(),""==i)return;i=i.replace(/(<([^>]+)>)/gi," ");let e="<"+t+">"+i.trim()+"</"+t+">";l={[n.tool_control]:e}}else l={[n.tool_control]:t};this.changeWidgetSetting(null,l,"",o)}getContentCurrentTag(t=null){let e=this.getToolsContainer(t)[0].querySelector(".elementor-text-editor");return e&&e.firstElementChild?e.firstElementChild.tagName.toLowerCase():null}setToolControl(){this.tool_control=this.getToolsContainer().find(".twbb-dropdown-select-tool-container").attr("data-control")}}function twbb_position_element(t){if(t.removeAttr("style"),void 0!==t[0]&&t[0].getBoundingClientRect().left<0){t.css({left:0,right:"unset"}),jQuery(window).width()<500&&t.css({left:"50%",right:"unset",transform:"translate(-50%, 0)",width:" max-content"})}void 0!==t[0]&&t[0].getBoundingClientRect().top<0&&t.css({top:"unset",bottom:"-50px"})}function twbb_onToolClick(t,e){window[e].onToolClick(t)}function twbb_fast_edit_tools_events(t,e){let o=window.parent.$e.components.get("panel/editor").activeModelId;void 0===window.twbb_fast_editor_tools_state&&(window.twbb_fast_editor_tools_state={}),window.twbb_fast_editor_tools_state[o]=e,"ask_ai"===e?jQuery(t).closest(".twbb-fast-editor-tools-container").addClass("twbb_ask_to_ai_opened"):"tools"===e&&jQuery(t).closest(".twbb-fast-editor-tools-container").removeClass("twbb_ask_to_ai_opened")}jQuery(document).on("ready",(function(){htmlTag_tool=new TWBB_HTMLTAG_TOOL,window.html_tag_tool=htmlTag_tool,htmlTag_tool.init()})),jQuery(document).ready((function(){jQuery(document).on("click",'.elementor-element[data-element_type="widget"]',(function(t){t.stopPropagation(),null===t.target.closest(".twbb-fe-tools")&&(FE_TOOL_FRONTEND.deleteActiveToolDataIfWidgetHasChanged(jQuery(this).data("id")),FE_TOOL_FRONTEND.closeAllTools(),FE_TOOL_FRONTEND.reRenderToolsWithVisibleValues(),n())})),jQuery(document).on("click",'.elementor-element[data-element_type="container"]',(function(t){t.stopPropagation(),null===t.target.closest(".twbb-fe-tools")&&(FE_TOOL_FRONTEND.deleteActiveToolDataIfWidgetHasChanged(jQuery(this).data("id")),FE_TOOL_FRONTEND.closeAllTools(),FE_TOOL_FRONTEND.reRenderToolsWithVisibleValues(),n())})),elementor.hooks.addAction("panel/open_editor/widget",(function(t,e,o){FE_TOOL_FRONTEND.activateTool(o.$el),twbb_position_element(o.$el.find(".twbb-fast-editor-tools-container")),FE_TOOL_FRONTEND.reInitTools(t,e,o)})),elementor.hooks.addAction("panel/open_editor/container",(function(t,e,o){FE_TOOL_FRONTEND.activateTool(o.$el),twbb_position_element(o.$el.find(">.twbb-fast-editor-tools-container")),FE_TOOL_FRONTEND.reInitTools(t,e,o)})),window.top.$e.commands.on("run:after",(function(t,e,o){"panel/change-device-mode"===e&&FE_TOOL_FRONTEND.changeDeviceMode()})),FE_TOOL_FRONTEND.changeDeviceMode();let t=null;function e(){let t=this,e=t.$el.attr("data-clicked-tool");if(t.$el.removeAttr("data-clicked-tool"),!e)return;let o=e+"_tool";if(!window[o])return;let n=t.$el.find('.twbb-fe-tool[data-tool="'+e+'"]');n&&window[o].setActiveToolData(n)}function o(e){t=e}function n(){if(null!==FE_TOOL_FRONTEND.getActiveToolContainer())return;let t=window.parent.$e.components.get("panel/editor").activeModelId;if(!t)return;let e=document.querySelector('[data-id="'+t+'"]');null!==e&&FE_TOOL_FRONTEND.activateTool(jQuery(e))}elementor.hooks.addAction("panel/open_editor/widget",(function(n,i,l){let s="text-editor"===i.attributes.widgetType;if(jQuery(".elementor-element").removeAttr("data-clicked-tool"),!s)return document.removeEventListener("mousemove",o),void(t=null);document.addEventListener("mousemove",o),l.off("before:render",e),l.on("before:render",e)})),jQuery(document).on("blur",".elementor-text-editor",(function(e){if(!t)return;let o=t.clientX,n=t.clientY,i=null;for(let t of Array.from(e.target.closest(".elementor-element").querySelectorAll(".twbb-fe-tool"))){let e=t.getBoundingClientRect();if(o>=e.left&&o<=e.left+e.width&&n>=e.top&&n<=e.top+e.height){i=t;break}}if(i){let t=jQuery(i).attr("data-tool");jQuery(i).closest(".elementor-element").attr("data-clicked-tool",t)}})),jQuery(document).on("mouseenter",".twbb-fe-tools > div",(function(t){jQuery(t.target).closest(".twbb-fe-tools").addClass("twbb-fe-tools-hovered")})),jQuery(document).on("mouseleave",".twbb-fe-tools",(function(t){jQuery(".twbb-fe-tools").removeClass("twbb-fe-tools-hovered")})),jQuery(document).on("keyup",".twbb_ask_to_ai",(function(){""!==jQuery(this).val().trim()?(jQuery(this).closest(".ask_to_ai_input_container").removeClass("ask_to_ai_disabled"),jQuery(this).closest(".twbb-fe-tool").removeClass("twbb_ask_to_ai_empty"),jQuery(this).closest(".twbb-fe-tool").find(".twbb_ask_to_ai_actions").removeClass("twbb_ask_to_ai_actions_active")):(jQuery(this).css("height","32px"),jQuery(this).css("border-radius","20px"),jQuery(this).css("overflow-y","hidden"),jQuery(this).closest(".ask_to_ai_input_container").addClass("ask_to_ai_disabled"),jQuery(this).closest(".twbb-fe-tool").addClass("twbb_ask_to_ai_empty"),jQuery(this).closest(".twbb-fe-tool").find(".twbb_ask_to_ai_actions").addClass("twbb_ask_to_ai_actions_active"))})),jQuery(document).on("focus",".twbb_ask_to_ai",(function(){if("image"===jQuery(this).data("type")){let t=window.parent.$e.components.get("panel/editor").activeModelId,e=window.parent.$e.components.get("document").utils.findContainerById(t).args.model.attributes.settings.attributes.image.url;e.includes("/placeholder.png")||void 0===e||""===e?jQuery(this).closest(".twbb-fe-tool").find(".twbb-ai-generate-image").each((function(){"new_image_view"!==jQuery(this).data("view")&&jQuery(this).addClass("twbb-ai-generate-image-disabled")})):jQuery(this).closest(".twbb-fe-tool").find(".twbb-ai-generate-image").removeClass("twbb-ai-generate-image-disabled")}})),jQuery(document).on("click",".twbb_ask_to_ai_action_remove_bg",(function(){jQuery(this).closest(".twbb-fe-tool").find(".twbb_ask_to_ai").val("Remove background"),jQuery(this).closest(".twbb-fe-tool").find(".twbb_ask_to_ai_submit_button").trigger("click")})),jQuery(document).on("input",".twbb_ask_to_ai",(function(){this.scrollHeight<44?(jQuery(this).css("height","32px"),jQuery(this).css("border-radius","20px"),jQuery(this).css("overflow-y","hidden")):(jQuery(this).css("border-radius","16px"),this.scrollHeight>80&&jQuery(this).css("overflow-y","auto"),jQuery(this).css("height",this.scrollHeight+"px"))}))}));class TWBB_MORE_TOOL extends FE_TOOL_FRONTEND{init(){super.init()}registerEvents(){let t=this;jQuery(document).on("click",".twbb-more-tool",(function(e){jQuery(this).hasClass("twbb-more-tool-active")?jQuery(this).removeClass("twbb-more-tool-active"):jQuery(this).addClass("twbb-more-tool-active"),t.onToolClick(jQuery(this),e,this),t.dataPush(jQuery(this))})),jQuery(document).on("click","body , .elementor-widget-container, .elementor-element",(function(t){!jQuery(t.target).is(".twbb-more-tool")&&window.parent.jQuery(".dialog-widget.dialog-simple-widget.elementor-context-menu").length>0&&window.parent.jQuery(".dialog-widget.dialog-simple-widget.elementor-context-menu").hasClass("twbb-contextmenu-opened")&&(window.parent.jQuery(".dialog-widget.dialog-simple-widget.elementor-context-menu").removeClass("twbb-contextmenu-opened"),jQuery(".twbb-more-tool").removeClass("twbb-more-tool-active"))})),jQuery(window).on("resize",(function(){window.parent.jQuery("body").hasClass("twbb-sg-sidebar-opened")?jQuery(".twbb-fast-editor-tools-container").addClass("twbb_zoom"):jQuery(".twbb-fast-editor-tools-container").removeClass("twbb_zoom")}))}onToolClick(t,e,o=null){if(window.parent.jQuery(".dialog-widget.dialog-simple-widget.elementor-context-menu").length>0&&window.parent.jQuery(".dialog-widget.dialog-simple-widget.elementor-context-menu").hasClass("twbb-contextmenu-opened"))window.parent.jQuery(".dialog-widget.dialog-simple-widget.elementor-context-menu").css("display"),window.parent.jQuery(".dialog-widget.dialog-simple-widget.elementor-context-menu").removeClass("twbb-contextmenu-opened"),jQuery(".twbb-more-tool").removeClass("twbb-more-tool-active");else{var n=t.offset(),i=t.outerWidth();const l=e.clientY,s=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,clientX:n.left+i+3,clientY:l});o.dispatchEvent(s),window.parent.jQuery(".dialog-widget.dialog-simple-widget.elementor-context-menu").addClass("twbb-contextmenu-opened")}}}function selectToolClick(t){let e=jQuery(t);if(e.hasClass("active"))handleDropdown(e,!1);else{let t=jQuery(".twbb-fe-select-tool.active");t.length>0&&handleDropdown(t,!1),handleDropdown(e,!0)}}function handleDropdown(t,e){if(!1===e&&FE_TOOL_FRONTEND.deleteAllActiveToolData(),t&&t.length>0)if(e&&!t.hasClass("active")){jQuery(t).addClass("active");let e=jQuery(t).find("ul.twbb-fe-dropdown"),o=e.find(".twbb-fe-select-tool-active");o.length&&(e.scrollTop(e.scrollTop()+o.position().top),e.scrollTop(e.scrollTop()+o.position().top-e.height()/2+o.height()/2))}else t.hasClass("active")&&jQuery(t).removeClass("active")}jQuery(document).on("ready",(function(){more_tool=new TWBB_MORE_TOOL,window.more_tool=more_tool,more_tool.init()})),jQuery(document).on("ready",(function(){jQuery(document).on("click","div.twbb-fe-select-tool li",(function(){jQuery(this).parent().find("li span").removeClass("twbb-fe-select-tool-active"),jQuery(this).find("span").addClass("twbb-fe-select-tool-active")})),jQuery(document).on("click","body",(function(t){(null===t.target.closest(".twbb-fe-select-tool")||jQuery(t.target).hasClass(".twbb-fe-selected-display"))&&FE_TOOL_FRONTEND.closeAllTools(TWBB_DROPDOWN_SELECT_TOOL)})),jQuery(document).on("keyup","#twbb-select-input",(function(){var t,e,o,n;for(t=jQuery(this).val().toUpperCase(),o=(e=jQuery(this).parent().parent().find("ul.twbb-fe-dropdown")).find("li"),n=0;n<o.length;n++)txtValue=o[n].textContent||o[n].innerText,txtValue.toUpperCase().indexOf(t)>-1?o[n].style.display="":o[n].style.display="none";!1===e.find("li").is(":visible")?e.find("li.twbb-select-no-results").css("display","block"):e.find("li.twbb-select-no-results").css("display","none")}))}));class TWBB_SHAPE_TOOL extends TWBB_DROPDOWN_SELECT_TOOL{constructor(){super(),this.tool_control="",this.shape=""}open_editor_command(){this.setToolControl(),this.tool_control&&this.setShape()}registerEvents(){let t=this;jQuery(document).on("click",".twbb-shape-tool-container.twbb-fe-select-tool",(function(){t.tool_control||t.setToolControl(),t.setShape(),t.onToolClick(jQuery(this)),t.dataPush(jQuery(this))})),jQuery(document).on("click",".twbb-shape-tool-container.twbb-fe-select-tool .twbb-fe-dropdown li",(function(){let e=jQuery(this).find("span").data("key"),o={[t.tool_control]:e};t.changeWidgetSetting(t.tool_control,o)}))}onToolClick(t){super.onToolClick(t),this.setActiveToolData(t),this.setSelectActiveElement(t,this.shape),selectToolClick(t)}setToolControl(){this.tool_control=this.getToolsContainer().find(".twbb-shape-tool-container").attr("data-control")}setShape(){this.shape=this.getAppliedSettingValue(this.tool_control)}}jQuery(document).on("ready",(function(){shape_tool=new TWBB_SHAPE_TOOL,window.shape_tool=shape_tool,shape_tool.init()}));class TWBB_URL_TOOL extends FE_TOOL_FRONTEND{constructor(){super(),self.tool_control="",self.button_url=""}open_editor_command(){this.getControlValues()}getControlValues(){let t=this,e=this.getToolsContainer();t.tool_control=e.find(".twbb-url-tool-container").attr("data-control"),t.tool_control&&(t.tool_control_value=t.model.getSetting(t.tool_control),t.button_url=t.tool_control_value.url,e.find(".twbb-url-tool-url").val(t.button_url))}checkButtonDisabled(){let t=this.getToolsContainer(),e=t.find(".twbb-url-tool-content .twbb-url-tool-content-button");""==t.find(".twbb-url-tool-url").val()?e.addClass("twbb-button-disabled"):e.removeClass("twbb-button-disabled")}registerEvents(){let t=this;jQuery(document).on("click",".twbb-url-tool",(function(){let e=jQuery(this).closest(".twbb-url-tool-container").find(".twbb-url-tool-content");FE_TOOL_FRONTEND.closeOtherTools(TWBB_URL_TOOL),e.is(":visible")?e.hide():(t.setCurrentLinkValues(),t.checkButtonDisabled(),twbb_position_element(e),e.show())})),jQuery(document).on("click","body",(function(t){null===t.target.closest(".twbb-url-tool-container")&&jQuery(document).find(".twbb-url-tool-content").hide()})),jQuery(document).on("input",".twbb-url-tool-url",(function(){t.checkButtonDisabled()})),jQuery(document).on("click",".twbb-url-tool-content-button",(function(){if(jQuery(this).hasClass("twbb-button-disabled"))return!1;let e,o,n;e=t.container,o=t.getToolsContainer().find(".twbb-url-tool-url").val(),t.tool_control_value.url=o,t.button_url=o,n={[t.tool_control]:t.tool_control_value},t.dataPush(jQuery(this)),t.setSetting(e,n)}))}setCurrentLinkValues(){let t=this;t.tool_control||t.getControlValues(),t.getToolsContainer().find(".twbb-url-tool-url").val(t.button_url)}onToolClick(t){selectToolClick(t)}closeTool(t){null===t&&(t=this.getToolsContainer()),t.find(".twbb-url-tool-content").hide()}}jQuery(document).on("ready",(function(){url_tool=new TWBB_URL_TOOL,window.url_tool=url_tool,url_tool.init()}));class TWBB_VIDEO_TOOL extends FE_TOOL_FRONTEND{constructor(){super(),self.tool_control="",self.tool_source_control=""}init(){super.init()}open_editor_command(){let t=this,e=this.getToolsContainer();t.tool_control=e.find(".twbb-video-tool-container").attr("data-control"),t.tool_source_control="video_type",t.tool_control&&(t.video_source=t.model.getSetting(t.tool_source_control),t.url_control=t.video_source+"_"+t.tool_control,t.video_url=t.model.getSetting(t.url_control),e.find(".twbb-video-tool-url").val(t.video_url),e.find(".twbb-fe-selected-display").text(t.video_source))}registerEvents(){let t=this;jQuery(document).on("click",".twbb-video-tool img.twbb-video-tool-upload",(function(){t.open_editor_command();jQuery(this).closest(".twbb-video-tool-container").find(".twbb-video-tool-content");let e=jQuery(this).closest(".twbb-video-tool-container").find(".twbb-video-link-tool-content");jQuery(this).closest(".twbb-video-tool-container").find(".twbb-video-source-tool-content").hide(),jQuery(this).closest(".twbb-video-tool-container").find(".twbb_active_popup").removeClass("twbb_active_popup"),e.is(":visible")?(jQuery(this).closest(".twbb-video-tool-cont-icon").removeClass("twbb_active_popup"),e.hide()):(t.setCurrentVideoValues(),e.show(),jQuery(this).closest(".twbb-video-tool-cont-icon").addClass("twbb_active_popup"))})),jQuery(document).on("click",".twbb-video-tool img.twbb-video-tool-link",(function(){t.open_editor_command();jQuery(this).closest(".twbb-video-tool-container").find(".twbb-video-tool-content");let e=jQuery(this).closest(".twbb-video-tool-container").find(".twbb-video-source-tool-content");jQuery(this).closest(".twbb-video-tool-container").find(".twbb-video-link-tool-content").hide(),jQuery(this).closest(".twbb-video-tool-container").find(".twbb_active_popup").removeClass("twbb_active_popup"),e.is(":visible")?(e.hide(),jQuery(this).closest(".twbb-video-tool-cont-icon").removeClass("twbb_active_popup")):(t.setCurrentVideoValues(),e.show(),jQuery(this).closest(".twbb-video-tool-cont-icon").addClass("twbb_active_popup"))})),jQuery(document).on("click","body , .elementor-widget-container, .elementor-element",(function(t){if(null===t.target.closest(".twbb-video-tool-container")){let t=jQuery(document).find(".twbb-video-tool-content");t.hide(),t.closest(".twbb-video-tool-container").find(".twbb_active_popup").removeClass("twbb_active_popup")}})),jQuery(document).on("click",".twbb-video-tool-content .twbb-fe-select-tool",(function(){t.onToolClick(jQuery(this))})),jQuery(document).on("click",".twbb-video-tool-content .twbb-fe-select-tool .twbb-fe-dropdown li",(function(){let e,o,n;e=t.container,o=jQuery(this).attr("data-action"),n={[t.tool_source_control]:o},t.video_source=o,t.url_control=o+"_"+t.tool_control,t.video_url=t.model.getSetting(t.url_control);let i=t.getToolsContainer();"hosted"==t.video_source||"videopress"==t.video_source?(i.find(".twbb-video-tool-url").hide(),i.find(".twbb-video-tool-link-title").hide(),i.find(".twbb-video-tool-url-container").hide(),i.find(".twbb-video-self-hosted").show(),i.find(".twbb-video-tool-file-title").show()):(i.find(".twbb-video-tool-url").show(),i.find(".twbb-video-tool-url-container").show(),i.find(".twbb-video-tool-link-title").show(),i.find(".twbb-video-self-hosted").hide(),i.find(".twbb-video-tool-file-title").hide()),t.setSetting(e,n)})),jQuery(document).on("change",".twbb-video-tool-content .twbb-video-tool-url",(function(){let e,o,n;e=t.container,o=jQuery(this).val(),n={[t.url_control]:o},t.video_url=o,t.dataPush(jQuery(this)),t.setSetting(e,n)})),jQuery(document).on("click",".twbb-video-tool-content .twbb-video-self-hosted",(function(){jQuery(t.panel.el).find(".elementor-panel-navigation-tab.elementor-tab-control-content").hasClass("elementor-active")||(jQuery(t.panel.el).find(".elementor-panel-navigation-tab").removeClass("elementor-active"),jQuery(t.panel.el).find(".elementor-panel-navigation-tab.elementor-tab-control-content").addClass("elementor-active"),t.panel.currentPageView.activateTab("content")),jQuery(t.panel.el).find(".elementor-control-media__tool[data-media-type='video']").trigger("click")}))}setCurrentVideoValues(){let t=this,e=this.getToolsContainer();e.find(".twbb-video-tool-url").val(t.video_url),e.find(".twbb-video-tool-open-url").attr("href",t.video_url);let o=e.find(".twbb-fe-dropdown li[data-action='"+t.video_source+"']").text();o=o.trim(),e.find(".twbb-fe-selected-display").text(o),"hosted"==t.video_source||"videopress"==t.video_source?(e.find(".twbb-video-tool-url").hide(),e.find(".twbb-video-tool-link-title").hide(),e.find(".twbb-video-tool-url-container").hide(),e.find(".twbb-video-self-hosted").show(),e.find(".twbb-video-tool-file-title").show()):(e.find(".twbb-video-tool-url").show(),e.find(".twbb-video-tool-link-title").show(),e.find(".twbb-video-tool-url-container").show(),e.find(".twbb-video-self-hosted").hide(),e.find(".twbb-video-tool-file-title").hide())}setSetting(t,e){super.setSetting(t,e)}onToolClick(t){selectToolClick(t)}}jQuery(document).on("ready",(function(){video_tool=new TWBB_VIDEO_TOOL,window.video_tool=video_tool,video_tool.init()}));class TWBAI_IFRAME extends FE_TOOL_FRONTEND{constructor(){super(),this.cache={},this.widgetId,this.frontAiType=""}setCacheElements(){this.cache=WriteWithAIHelper.getCacheElements()}init(){super.init(),this.setCacheElements()}registerEvents(){let t=this;t.aiButtonClick(),t.onBodyClick(),t.actionButtonClick(),t.pressEscape(),t.newPromptClick(),t.askAiEvents()}askAiEvents(){let t=this;jQuery(document).on("click",".twbb_ask_to_ai_submit_button",(function(e){t.askToAi(this)})),jQuery(document).on("keydown",".twbb_ask_to_ai",(function(t){"Enter"!==t.key&&13!==t.keyCode||(t.preventDefault(),jQuery(this).closest(".ask_to_ai_input_container").find(".twbb_ask_to_ai_submit_button").trigger("click"))}))}askToAi(t){let e=jQuery(t).closest(".ask_to_ai_input_container").find(".twbb_ask_to_ai").val();e.length>0&&(jQuery(t).closest(".ask_to_ai_input_container").find(".twbb_ask_to_ai").val(""),jQuery(t).closest(".ask_to_ai_input_container").find(".twbb_ask_to_ai").css({height:"32px"}),jQuery(t).addClass("twbb_ai_loading"),jQuery(t).closest(".twbb-fast-editor-tools-container").addClass("twbb_disabled_loading"),jQuery(t).closest(".twbb-fe-tool").addClass("twbb_ask_to_ai_empty"),window.parent.TWBBCoPilotInstance.getDataToSend(e))}aiButtonClick(){let t=this;jQuery(document).on("click",".twbb-ai-front-button-layer",(function(){t.onToolClick(jQuery(this))}))}onToolClick(t){this.setActiveToolData(t),FE_TOOL_FRONTEND.closeOtherTools(TWBAI_IFRAME);let e=this,o=t.closest(".twbb-ai-front"),n=t.closest(".elementor-widget").data("widget_type").split(".default")[0];if(o.attr("data-eventName","write with AI content"),o.attr("data-info",n),0==t.parents(".elementor-widget-container").find(".pen").length&&e.callDataAnalytics("write with AI",n),t.parent().find(".twbb-ai-front-action-cont").is(":visible")||t.parent().find(".twbb-ai-front-new_prompt-container").is(":visible"))0==t.parents(".elementor-widget-text-editor.twbb-set-visible-ai-popup").length||"not_visible"==t.parents(".elementor-widget-text-editor.twbb-set-visible-ai-popup").attr("data-ai-popup-visible")?e.popupClose():t.parents(".elementor-widget-text-editor").attr("data-ai-popup-visible","not_visible");else{(jQuery(".twbb-ai-front-action-cont").is(":visible")||jQuery(".twbb-ai-front-new_prompt-container").is(":visible")||0==t.parents(".elementor-widget-text-editor.twbb-set-visible-ai-popup").length)&&e.popupClose();let o=jQuery(".twbb-fe-select-tool.active");o.length>0&&handleDropdown(o,!1),t.addClass("twbb-ai-front-button-layer-visible"),t.parent().parent().addClass("twbb-ai-front-open"),this.position_element(t.parent().find(".twbb-ai-front-action-cont"))}}onBodyClick(){let t=this;jQuery("body").on("click",(function(e){1!==jQuery(e.target).closest(".twbb-ai-front").length&&t.popupClose()}))}position_element(t){t.removeAttr("style"),t.css({display:"flex",opacity:1}),jQuery(window).width()<500&&t.css({left:"50%",right:"unset",transform:"translate(-50%, 0)",width:" max-content"})}callDataAnalytics(t,e){window.parent.analyticsDataPush(t,"write with AI content",e)}actionButtonClick(){let t=this;jQuery(document).on("click",".twbb-ai-action-button",(function(e){t.generateTextPreparation("current_text",jQuery(this))})),jQuery(document).on("click",".twbb-ai-generate-image",(function(e){"widget"!=t.model.get("elType")||0!=jQuery(t.panel.el).find(".twb-ai-image-button").length||jQuery(t.panel.el).find(".elementor-panel-navigation-tab.elementor-tab-control-content").hasClass("elementor-active")||jQuery(t.panel.el).find(".elementor-panel-navigation-tab.elementor-tab-control-content").trigger("click"),parent.window.twbb_image_generation_view=jQuery(this).data("view"),jQuery(t.panel.el).find(".twb-ai-image-button").trigger("click")}))}pressEscape(){let t=this;jQuery(document).keyup((function(e){"Escape"===e.key&&t.popupClose()}))}newPromptClick(){let t=this;jQuery(document).on("click",".twbb-ai-front-new-prompt-button",(function(){let e,o,n,i=jQuery(this).closest(".twbb-ai-front");i.addClass("twbb-ai-front-newprompt-open"),e=jQuery(this).closest(".twbb-ga-data-save").attr("data-eventName"),o="new_prompt_button",n=jQuery(this).closest(".twbb-ga-data-save").attr("data-info"),window.parent.analyticsDataPush("new_prompt_button",e,n),i.find(".twbb-ai-front-new_prompt-container").length?(i.find(".twbb-ai-front-new_prompt-container").show(),t.position_element(i.find(".twbb-ai-front-new_prompt-container"))):(jQuery(this).parent().closest("#twbb-ai-front-new_prompt-template").show(),i.find(".twbb-ai-front-new_prompt-container").show(),t.position_element(i.find(".twbb-ai-front-new_prompt-container"))),jQuery(this).parent().hide(),t.newpromptClickEvent(),jQuery(".twbb-ai-front-new_prompt-textarea").on("keyup",(function(t){""==jQuery(this).val()?jQuery(this).parent().find(".twbb-ai-front-new_prompt-action-button").addClass("twbb-ai-front-button-disabled"):jQuery(this).parent().find(".twbb-ai-front-new_prompt-action-button").removeClass("twbb-ai-front-button-disabled")}))}))}generateTextPreparation(t,e){let o;self=this;for(let t in self.cache.controls)if(window.parent.$e.components.get("panel/editor").manager.$el.find("div.elementor-control-"+self.cache.controls[t]).length&&(o=window.parent.$e.components.get("panel/editor").manager.currentPageView.model.getSetting(self.cache.controls[t]),self.widgetId=window.parent.$e.components.get("panel/editor").activeModelId,""!=o)){self.frontAiType=self.cache.controls[t];break}if(self.showHideFrontLoading(1,e),"current_text"==t)twbb_send_request(e,o);else if("new_text"==t){let t=e.parent().find(".twbb-ai-front-new_prompt-textarea").val();twbb_send_request(e,t)}}newpromptClickEvent(){let t=this;jQuery(document).on("click",".twbb-ai-front-new_prompt-action-button",(function(){if(jQuery(this).hasClass("twbb-ai-front-button-disabled"))return!1;t.generateTextPreparation("new_text",jQuery(this))})),t.newPromptShiftEnter()}newPromptShiftEnter(){jQuery(document).on("keydown",".twbb-ai-front-new_prompt-textarea",(function(t){"Enter"!=t.key||t.shiftKey||(t.preventDefault(),jQuery(t.target).parent().find(".twbb-ai-front-new_prompt-action-button").trigger("click"))}))}popupClose(){jQuery(".elementor-widget-text-editor").removeClass("twbb-set-visible-ai-popup"),jQuery(".elementor-widget-text-editor").removeAttr("data-ai-popup-visible"),jQuery(".twbb-ai-front-action-cont").parent().parent().removeClass("twbb-ai-front-open"),jQuery(".twbb-ai-front-button-layer").removeClass("twbb-ai-front-button-layer-visible"),jQuery(".twbb-ai-front.twbb-ai-front-newprompt-open").removeClass("twbb-ai-front-newprompt-open"),jQuery(".twbb-ai-front").removeClass("twbb-ai-front-open-newprompt"),jQuery(".twbb-ai-front-new_prompt-container").hide(),jQuery(".twbb-ai-front-action-cont").attr("style",""),jQuery(".twb-help-button-layer").removeClass("twbb-not-visible"),jQuery("#elementor-preview-iframe").contents().find(".twbb-ai-front-action-cont").parent().parent().removeClass("twbb-ai-front-open"),jQuery("#elementor-preview-iframe").contents().find(".twbb-ai-front-button-layer").removeClass("twbb-ai-front-button-layer-visible"),jQuery("#elementor-preview-iframe").contents().find(".twbb-ai-front.twbb-ai-front-newprompt-open").removeClass("twbb-ai-front-newprompt-open")}showHideFrontLoading(t,e){t?(e.closest(".twbb-fast-editor-tools-container").addClass("twbb_disabled_loading"),e.closest(".twbb-fe-tool").find(".twbb_ask_to_ai_submit_button").addClass("twbb_ai_loading")):(e.closest(".twbb-fast-editor-tools-container").removeClass("twbb_disabled_loading"),e.closest(".twbb-fe-tool").find(".twbb_ask_to_ai_submit_button").removeClass("twbb_ai_loading"))}addResult(t){t=WriteWithAIHelper.validateOutput(t,this.frontAiType);let e=this.generateSetting(t);FastEditorHelper.setSetting(e[0],e[1])}generateSetting(t){let e=self.frontAiType,o={[e]:t};return[window.parent.$e.components.get("document").utils.findContainerById(self.widgetId),o]}closeTool(t){this.popupClose()}}function twbb_send_request(t,e){if(""==e)return!1;jQuery(document).find(".twbb-ai-error-message").hide();let o,n,i,l,s=jQuery(t).data("action"),r={};if(i=s,jQuery(".twbb-ga-data-save.twbb-ai-front-open").length>0&&(n=jQuery(".twbb-ga-data-save.twbb-ai-front-open").attr("data-eventName"),o=jQuery(".twbb-ga-data-save.twbb-ai-front-open").attr("data-info"),window.parent.analyticsDataPush(i,n,o)),"change_tone"==s){r={text:e,tone:jQuery(t).data("value")}}else if("translate_to"==s){r={text:e,language:jQuery(t).data("value")}}else r={text:e};"function"==typeof window.parent.restRequestInstance&&(l=window.parent.restRequestInstance("builder/"+s,r,"POST",(function(e){let o=e.data.output;write_with_ai_tool.addResult(o),write_with_ai_tool.showHideFrontLoading(0,t)}),(function(e){write_with_ai_tool.showHideFrontLoading(0,t)}),(function(e){write_with_ai_tool.showHideFrontLoading(0,t)})),l.twbb_send_rest_request(true))}jQuery(document).on("ready",(function(){write_with_ai_tool=new TWBAI_IFRAME,window.write_with_ai_tool=write_with_ai_tool,write_with_ai_tool.init()}));class WriteWithAIHelper{static getCacheElements(){let t={image_controls:["image","image_overlay","thumbnail","testimonial_image","twbb_bg_image","background_image","background_image_tablet","background_image_mobile","background_hover_image","background_overlay_image","background_overlay_image_tablet","background_overlay_image_mobile","background_overlay_image_tablet","background_overlay_image_mobile","background_overlay_hover_image","background_overlay_hover_image_tablet","background_overlay_hover_image_mobile","_background_image","_background_image_tablet","_background_image_mobile","_background_hover_image","_background_hover_image_tablet","_background_hover_image_mobile","background_a_image","background_a_image_tablet","background_a_image_mobile","background_b_image","background_b_image_tablet","background_b_image_mobile","identity_image","background_border_background_overlay_group_image","background_border_background_group_image","gallery","carousel"]};return t.controls=t.image_controls.concat(["text","description_text","editor","title","title_text","tab_title","tab_content","inner_text","testimonial_content","testimonial_name","testimonial_job","alert_title","alert_description","link_text","prefix","suffix"]),t.sub_controls=["tabs","icon_list","social_icon_list","slides","members","price_list"],t.coming_soon_controls=["selected_icon","social_icon","selected_active_icon","dismiss_icon","custom_css","html"],t}static validateOutput(t,e){return("'"==t.charAt(0)&&"'"==t.charAt(t.length-1)||'"'==t.charAt(0)&&'"'==t.charAt(t.length-1))&&(t=t.slice(1,-1)),"title"==e&&"."==t.charAt(t.length-1)&&(t=t.slice(0,-1)),t}}